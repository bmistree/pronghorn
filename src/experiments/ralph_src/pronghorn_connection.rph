alias Service MultiControllerOffOn as 'experiments.MultiControllerOffOnJava.MultiControllerOffOn';

Endpoint PronghornConnection
{
    Service MultiControllerOffOn off_on_app = null;

    set_off_on_app(Service MultiControllerOffOn to_set_to)
    {
        off_on_app = to_set_to;
    }

    // called from off_on_app
    single_op_and_ask_children_for_single_op()
    {
        @partner.receive_single_op_and_ask_children_for_single_op();
    }

    // called exclusively from partner
    receive_single_op_and_ask_children_for_single_op()
    {
        off_on_app.single_op_and_ask_children_for_single_op();
    }

    // called from off_on_app
    single_op_and_ask_children_for_single_op_switch_id(Text switch_id)
    {
        @partner.receive_single_op_and_ask_children_for_single_op_switch_id(switch_id);
    }

    // called exclusively from partner
    receive_single_op_and_ask_children_for_single_op_switch_id(Text switch_id)
    {
        off_on_app.single_op_and_ask_children_for_single_op_switch_id(switch_id);
    }

    // called from off_on_app
    insert_entry_on_all_switches_and_partners(Text tcp_src_port)
    {
        @partner.receive_insert_entry_on_all_switches_and_partners(
            tcp_src_port);
    }

    // called exclusively from partner
    receive_insert_entry_on_all_switches_and_partners(Text tcp_src_port)
    {
        off_on_app.insert_entry_on_all_switches_and_partners(tcp_src_port);
    }
}
